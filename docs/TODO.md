# TODO / План работ по проекту сайта ОСС (DVFU)

Дата: 2025-12-16

Документ предназначен как единый чек‑лист для разработки, контроля прогресса и передачи проекта следующей команде.

## 0) Ключевой результат проекта (Definition of Done)

Проект считается завершённым (MVP), когда выполнено:

- Сайт доступен по постоянной ссылке (Production) и имеет отдельное окружение Staging (Preview/Branch).
- Работает «единое окно»: пользователь выбирает кейс → получает инструкцию/чек‑лист → подаёт обращение.
- Есть 6 направлений (комитетов/блоков) с цветовой идентичностью.
- Работает приём обращений, статусы, базовая админ‑панель.
- Публичная статистика показывает минимум 4–6 метрик.
- Контент (новости/гайды/FAQ/контакты/документы) обновляется через CMS без правок кода.
- Есть базовая документация для передачи управления.

---

## 1) Подготовка репозитория и окружения

### 1.1 Репозиторий
- [ ] Создать GitHub репозиторий (public/private по решению ОСС).
- [ ] Настроить ветки: `main` (prod) и `dev` (staging).
- [ ] Включить Pull Request flow (минимум 1 ревью перед мерджем в `main`).
- [ ] Добавить `.editorconfig`, `.gitignore`, настройку форматтера (Prettier) и линтера (ESLint).

### 1.2 Локальный запуск
- [ ] Описать в `docs/README.md` требования: Node.js LTS, pnpm/npm, Python 3.11+ (или 3.10+), Docker (опционально).
- [ ] Проверить локальный старт фронта: `pnpm dev` / `npm run dev`.
- [ ] Проверить локальный старт бекенда (если используется): `uvicorn main:app --reload`.

---

## 2) Дизайн‑система и бренд‑правила

### 2.1 Цветовая концепция
- [ ] Зафиксировать палитру:
  - ОСС (главная) — красный с холодным отливом (OSS‑red)
  - Правовой комитет — тёмно‑синий
  - Инфраструктурный блок — сине‑голубой
  - Стипендиальный комитет — холодно‑зелёный
  - Иностранный блок — ярко‑жёлтый
  - Нейтральные разделы — серый/графит
- [ ] Реализовать централизованно в `tailwind.config.js` (без хардкода hex в компонентах).
- [ ] Ввести понятие `accent` (CSS‑переменная или token) на уровне layout направления.

### 2.2 Типографика
- [ ] Подключить шрифты по гайду (SF UI Display / SF UI Text).
- [ ] Зафиксировать масштабы: H1/H2/H3, body, small, captions.
- [ ] Правила типографики (кавычки «ёлочки», тире —, переносы) — задокументировать и соблюдать.

### 2.3 UI‑паттерны
- [ ] Главная: hero + 3 CTA + плитки «Мне нужно…» + поиск.
- [ ] Страница направления: «частые кейсы» → «как действовать» → «документы» → «подать обращение».
- [ ] Карточки контента: одинаковый паттерн для news/guide.
- [ ] Компонентная библиотека: Header, Footer, DirectionCard, ContentCard, Badge, CTAButton.

---

## 3) Информационная архитектура и роутинг (Next.js)

### 3.1 Публичные страницы
- [ ] `/` — главная (OSS‑red).
- [ ] `/directions` — список направлений.
- [ ] `/directions/[slug]` — страница направления (акцентный цвет по slug).
- [ ] `/appeal` — форма подачи обращения.
- [ ] `/appeal/status` — проверка статуса.
- [ ] `/statistics` — публичная статистика.
- [ ] `/documents` — документы.
- [ ] `/contacts` — контакты.
- [ ] `/content` — все новости и гайды.
- [ ] `/content/[slug]` — страница материала.

### 3.2 Внутренние страницы (только для ОСС)
- [ ] `/admin` — вход/панель.
- [ ] `/admin/appeals` — таблица/канбан обращений.
- [ ] `/admin/content` — управление контентом.
- [ ] `/admin/dashboards` — расширенная аналитика.
- [ ] `/admin/dictionaries` — справочники/категории.

---

## 4) База данных (Supabase / PostgreSQL)

### 4.1 Реализация схемы
- [ ] Заполнить `database/schema.sql` финальным DDL (таблицы, связи, индексы).
- [ ] Добавить `database/seed.sql` (минимальные тест‑данные): направления, обращения, материалы.

### 4.2 RLS (Row Level Security)
- [ ] Включить RLS для всех таблиц с обращениями.
- [ ] Публичное создание обращения разрешено.
- [ ] Чтение обращения — только по секретному токену/коду.
- [ ] Члены ОСС видят обращения своего направления; админ видит всё.

### 4.3 Трекинг статуса
- [ ] Добавить `public_token` в `appeals`.
- [ ] Генерировать токен при создании обращения.
- [ ] `/appeal/status` показывает статус по токену.

---

## 5) Приём обращений

- [ ] Реализовать форму с валидацией.
- [ ] Автоподстановка направления при переходе со страницы направления.
- [ ] Анти‑спам (минимальная защита, с расширением в будущем).

---

## 6) Контент: новости и гайды

- [ ] Подключить CMS (Decap CMS или Keystatic).
- [ ] Настроить коллекции news/guides/faq/contacts/documents/directions.
- [ ] Реализовать `/content` и `/content/[slug]`.
- [ ] Встраивать новости/гайды в страницы направлений.

---

## 7) Дашборды и статистика

### 7.1 Публично
- [ ] Кол-во обращений по времени.
- [ ] Распределение по направлениям.
- [ ] Топ‑темы.
- [ ] Среднее время до первого ответа.
- [ ] Доля закрытых в срок.

### 7.2 Внутренне
- [ ] Нагрузка по ответственным.
- [ ] SLA по направлениям.
- [ ] Просроченные обращения.

---

## 8) Деплой (Vercel)

- [ ] Production + Staging.
- [ ] Preview deployments для PR.
- [ ] Переменные окружения Supabase.

---

## 9) Документация и передача

- [ ] README: запуск, деплой, контент.
- [ ] OPERATIONS: что делать при сбоях.
- [ ] BRAND: палитра и типографика.

---

## 10) Backlog (после MVP)

- [ ] Вложения к обращениям.
- [ ] Нотификации в Telegram.
- [ ] Импорт/экспорт.
- [ ] Оценка качества ответа.
- [ ] Публичные отчёты.
