# Настройка PWA (Progressive Web App)

## Обзор

Сайт поддерживает установку как Progressive Web App (PWA), что позволяет:
- Установить сайт как приложение на телефон/планшет
- Работать офлайн (базовая поддержка)
- Быстрый доступ с домашнего экрана
- Push-уведомления (в будущем)

## Текущая реализация

✅ Файл `manifest.ts` создан
✅ Базовая конфигурация PWA
⏳ Требуются иконки для полной поддержки

## Шаг 1: Создание иконок

Создайте иконки для приложения:

1. **192x192 PNG** - для Android
2. **512x512 PNG** - для iOS и больших экранов
3. Формат: PNG с прозрачностью (опционально)

Рекомендуется использовать логотип ОСС ДВФУ.

### Инструменты для создания

- [PWA Asset Generator](https://github.com/onderceylan/pwa-asset-generator)
- [RealFaviconGenerator](https://realfavicongenerator.net/)
- Photoshop/GIMP

## Шаг 2: Размещение иконок

Поместите иконки в `frontend/nextjs/public/`:

```
public/
├── icon-192.png
├── icon-512.png
└── favicon.ico
```

## Шаг 3: Обновление manifest.ts

Если иконки имеют другие имена, обновите пути в `app/manifest.ts`:

```typescript
icons: [
  {
    src: '/icon-192.png',
    sizes: '192x192',
    type: 'image/png',
  },
  {
    src: '/icon-512.png',
    sizes: '512x512',
    type: 'image/png',
  },
]
```

## Шаг 4: Service Worker (опционально)

Для полной поддержки офлайн режима добавьте Service Worker:

1. Создайте `public/sw.js`
2. Зарегистрируйте в `app/layout.tsx`
3. Кэшируйте статические ресурсы

**Пример регистрации:**

```typescript
// В layout.tsx или отдельном компоненте
useEffect(() => {
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js');
  }
}, []);
```

## Тестирование

### На Android

1. Откройте сайт в Chrome
2. Меню → "Добавить на главный экран"
3. Проверьте, что иконка появилась

### На iOS

1. Откройте сайт в Safari
2. Поделиться → "На экран «Домой»"
3. Проверьте установку

### В браузере

1. Откройте DevTools (F12)
2. Application → Manifest
3. Проверьте, что manifest загружается
4. Проверьте иконки

## Улучшения

### Офлайн режим

Добавьте Service Worker для кэширования:
- Статические страницы
- API ответы
- Изображения и ресурсы

### Push-уведомления

Для push-уведомлений:
1. Настройте VAPID ключи
2. Зарегистрируйте Service Worker
3. Подпишите пользователей

### Обновления

Service Worker может автоматически обновляться при новых версиях.

## Troubleshooting

**Иконка не отображается:**
- Проверьте пути в manifest.ts
- Убедитесь, что файлы в public/
- Проверьте размеры (должны быть точно 192x192 и 512x512)

**Не устанавливается:**
- Проверьте, что сайт работает по HTTPS (обязательно для PWA)
- Проверьте manifest в DevTools
- Убедитесь, что Service Worker зарегистрирован (если используется)

**Офлайн не работает:**
- Service Worker не настроен (это нормально для базовой версии)
- Добавьте Service Worker для полной поддержки

